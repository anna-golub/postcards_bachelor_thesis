# [Auction.ru](https://auction.ru/)

## Как пользоваться

В файле `main.py` заполнить список `input_url_list` ссылками на продавцов, лоты которых нужно скачать (ссылки присылает менеджер заливки). Затем запустить этот файл. Когда он отработает, в папке `zip` будут лежать архивы, готовые к отправке менеджеру заливки. Информация об ошибках, произошедших во время работы скрипта, будет записана в файл в папке `exceptions`.

## Как это работает

Последовательно выполняются следующие шаги.

1. Сбор информации о продавце - `get_seller_info`  
Парсим [первая страница с товарами продавца](https://auction.ru/listing/offer?flt_prp_owner=12985482941160&ipp=180) и оттуда достаем его логин и число страниц с его лотами на сайте.

2. Сбор ссылок на индивидуальные страницы открыток - `scrape_urls`  
С использованием веб-драйвера Chromium получаем исходный код страниц с лотами. Оттуда получаем ссылки на индивидуальные страницы открыток ([пример](https://auction.ru/offer/1_maja_adrianov_tanec-i46169721918465.html)). Сохраняем их в датафрейм.

3. Скрейпинг сканов - `scrape_photos`  
Скачиваем сканы с индивидуальных страниц открыток в папку `photos`. Если скрипт выбрасывает исключение (проблема с соединением, ошибка доступа на сайт или др.), информация о нем сохраняется в файл в папке `exceptions`.

4. Скрейпинг сканов из `exceptions` - `scrape_from_exceptions`  
Повторная попытка скачать сканы, на которых в первый раз была ошибка.

5. Формирование zip-архивов - `zip`  
Упаковываем сканы в zip-архивы. Предполагается отправлять их в телеграме, где действует ограничение 2 Гб на размер загружаемого файла. Поэтому, если размер папки со сканами превышает 1.5 Гб, предварительно разделяем ее на несколько папок и каждую архивируем отдельно.
